(this.webpackJsonpgametest=this.webpackJsonpgametest||[]).push([[0],{1188:function(e,a,t){"use strict";t.r(a),t.d(a,"socket",(function(){return J}));var n=t(0),l=t.n(n),r=t(51),o=t.n(r),s=t(14),i=t(1),c=t(55),m=t.n(c),d=t(28),u=t.n(d);const p=(e,a)=>{const t=JSON.stringify(a);sessionStorage.setItem(e,t)},g=e=>{const a=sessionStorage.getItem(e);return JSON.parse(a)},E=m()("http://localhost:4321/",{multiplex:!1});var b=e=>(console.log("configureSocket"),E.on("connect",()=>{console.log("connected");const a=u()(g("playerIdentity"),"name");a?E.emit("PLAYER_LOGIN",{name:a}):e({type:"GET_NAME"})}),E.on("GAMESTATE_UPDATED",a=>{console.log("GAMESTATE_UPDATED",{state:a}),e({type:"UPDATE_RECEIVED",payload:a})}),E.on("PLAYER_UPDATED",a=>{console.log("PLAYER_UPDATED socket",{state:a}),e({type:"PLAYER_UPDATED",payload:a})}),E.on("PLAYER_LIST_UPDATE",a=>{console.log("PLAYER_LIST_UPDATE",{state:a}),e({type:"PLAYER_LIST_UPDATED",payload:a})}),E.on("PLAYER_LOGIN_SUCCESS",a=>{console.log("PLAYER_LOGIN_SUCCESS",a);const t=g("playerIdentity")||{};p("playerIdentity",Object(i.a)(Object(i.a)({},t),{},{status:"gamestate"})),e({type:"PLAYER_LOGGED_IN",payload:a})}),E.on("PLAYER_LOGIN_FAIL",a=>{console.log("PLAYER_LOGIN_FAIL",a);const t=u()(g("playerIdentity"),"status");e("authenticating"===t?{type:"PLAYER_LOGIN_FAIL"}:{type:"GET_NAME"})}),E.on("disconnect",()=>{console.log("you have been disconnected")}),E.on("reconnect",()=>{console.log("you have been reconnected")}),E),f=(t(138),t(4));var y=({submitName:e})=>{const a=Object(n.useState)(""),t=Object(f.a)(a,2),r=t[0],o=t[1];return l.a.createElement("div",{className:"min-h-screen bg-white flex"},l.a.createElement("div",{className:"flex-1 flex flex-col justify-center py-12 px-4 sm:px-6 lg:flex-none lg:px-20 xl:px-24"},l.a.createElement("div",{className:"mx-auto w-full max-w-sm"},l.a.createElement("div",null,l.a.createElement("img",{className:"h-12 w-auto",src:"/img/logos/workflow-mark-on-white.svg",alt:"Workflow"}),l.a.createElement("h2",{className:"mt-6 text-3xl leading-9 font-extrabold text-gray-900"},"Enter your player name")),l.a.createElement("div",{className:"mt-8"},l.a.createElement("div",{className:"mt-6"},l.a.createElement("form",{action:"#",method:"POST",onSubmit:a=>{a.preventDefault(),e({name:r})}},l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"email",className:"block text-sm font-medium leading-5 text-gray-700"},"Player Name"),l.a.createElement("div",{className:"mt-1 rounded-md shadow-sm"},l.a.createElement("input",{id:"name",type:"text",onChange:({target:{value:e}})=>{o(e)},required:!0,className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:shadow-outline-blue focus:border-blue-300 transition duration-150 ease-in-out sm:text-sm sm:leading-5"}))),l.a.createElement("div",{className:"mt-6"},l.a.createElement("span",{className:"block w-full rounded-md shadow-sm"},l.a.createElement("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out"},"Yes")))))))),l.a.createElement("div",{className:"hidden lg:block relative w-0 flex-1"},l.a.createElement("img",{className:"absolute inset-0 h-full w-full object-cover",src:"https://images.unsplash.com/photo-1505904267569-f02eaeb45a4c?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1908&q=80",alt:""})))},h=t(56);function x(){const e=Object(h.a)(["\n  align-items: center;\n  background: linear-gradient(45deg, #d91e18, #9a12b3);\n  display: flex;\n  justify-content: center;\n  margin: 0;\n  min-height: 100vh;\n  padding: 0;\n  width: 100vw;\n\n  .wrapper {\n    position: absolute;\n  }\n\n  .wrapper:nth-of-type(2) > div {\n    height: 40px;\n    width: 40px;\n    opacity: 0.8;\n  }\n\n  .wrapper:nth-of-type(3) > div {\n    height: 30px;\n    width: 30px;\n    opacity: 0.6;\n  }\n\n  .wrapper:nth-of-type(4) > div {\n    height: 20px;\n    width: 20px;\n    opacity: 0.4;\n  }\n\n  .wrapper:nth-of-type(5) > div {\n    height: 10px;\n    width: 10px;\n    opacity: 0.2;\n  }\n\n  div > div {\n    background: #fff;\n    border-radius: 100%;\n    height: 50px;\n    margin: 40px;\n    width: 50px;\n  }\n\n  .wrapper {\n    animation: x 1s ease-in-out alternate infinite 0s both;\n  }\n\n  .wrapper > div {\n    animation: y 1s linear infinite 0s both;\n  }\n\n  .wrapper:nth-of-type(2),\n  .wrapper:nth-of-type(2) > div {\n    animation-delay: 0.1s;\n  }\n  .wrapper:nth-of-type(3),\n  .wrapper:nth-of-type(3) > div {\n    animation-delay: 0.2s;\n  }\n  .wrapper:nth-of-type(4),\n  .wrapper:nth-of-type(4) > div {\n    animation-delay: 0.3s;\n  }\n  .wrapper:nth-of-type(5),\n  .wrapper:nth-of-type(5) > div {\n    animation-delay: 0.4s;\n  }\n\n  @-webkit-keyframes x {\n    0% {\n      transform: translate(-100px, 0);\n    }\n    100% {\n      transform: translate(100px, 0);\n    }\n  }\n\n  @keyframes x {\n    0% {\n      transform: translate(-100px, 0);\n    }\n    100% {\n      transform: translate(100px, 0);\n    }\n  }\n\n  @keyframes y {\n    25% {\n      transform: translate(0, -50px);\n    }\n    0%,\n    50%,\n    100% {\n      transform: translate(0, 0);\n    }\n    75% {\n      transform: translate(0, 50px);\n    }\n  }\n"]);return x=function(){return e},e}const v=t(57).a.section(x());var w=()=>l.a.createElement(v,null,l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",null)),l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",null)),l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",null)),l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",null)),l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",null)));var N=({children:e})=>l.a.createElement("div",null,l.a.createElement("header",{className:"bg-white shadow-sm"},l.a.createElement("div",{className:"max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8"},l.a.createElement("h1",{className:"text-lg leading-6 font-semibold text-gray-900"},"Dashboard"))),l.a.createElement("main",null,l.a.createElement("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"},e)));var A=({addPlayer:e})=>{const a=Object(n.useState)(""),t=Object(f.a)(a,2),r=t[0],o=t[1],s=Object(n.useState)("40"),i=Object(f.a)(s,2),c=i[0],m=i[1];return l.a.createElement("div",null,l.a.createElement("fieldset",null,l.a.createElement("legend",{className:"block text-sm font-medium leading-5 text-gray-700"},"Player Information"),l.a.createElement("div",{className:"mt-1 rounded-md shadow-sm"},l.a.createElement("div",null,l.a.createElement("input",{onChange:e=>{const a=e.target.value;o(a)},value:r,className:"form-input relative block w-full rounded-none rounded-b-md bg-transparent focus:z-10 transition ease-in-out duration-150 sm:text-sm sm:leading-5",placeholder:"Name"})),l.a.createElement("div",{className:"-mt-px"},l.a.createElement("input",{value:c,onChange:e=>{const a=e.target.value;/\d+/.test(a)?m(a):e.preventDefault()},className:"form-input relative block w-full rounded-none rounded-b-md bg-transparent focus:z-10 transition ease-in-out duration-150 sm:text-sm sm:leading-5",placeholder:"Life"})))),l.a.createElement("button",{onClick:a=>{a.preventDefault(),console.log("addPlayer",{name:r,life:c}),e({name:r,life:Number.parseInt(c,10)})},type:"button",className:"inline-flex items-center px-6 py-3 border border-transparent text-base leading-6 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition ease-in-out duration-150"},"Add player"))};const P=()=>l.a.createElement("div",{className:"flex-shrink-0 bg-indigo-500 rounded-md p-3"},l.a.createElement("svg",{className:"h-6 w-6 text-white",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"})),k=({children:e})=>l.a.createElement("div",{className:"bg-white overflow-hidden shadow rounded-lg"},l.a.createElement("div",{className:"px-4 py-5 sm:p-6"},l.a.createElement("div",{className:"flex items-center"},e))),O=({dir:e,side:a,amount:t})=>e!==a||t<=1?null:l.a.createElement("span",{className:"text-xl leading-8 font-semibold text-gray-900"},t),_=()=>l.a.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18ZM11 7C11 6.44772 10.5523 6 10 6C9.44772 6 9 6.44772 9 7V9H7C6.44772 9 6 9.44771 6 10C6 10.5523 6.44772 11 7 11H9V13C9 13.5523 9.44772 14 10 14C10.5523 14 11 13.5523 11 13V11H13C13.5523 11 14 10.5523 14 10C14 9.44772 13.5523 9 13 9H11V7Z",fill:"#4A5568"}),D=()=>l.a.createElement("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18ZM7 9C6.44772 9 6 9.44772 6 10C6 10.5523 6.44772 11 7 11H13C13.5523 11 14 10.5523 14 10C14 9.44772 13.5523 9 13 9H7Z",fill:"#4A5568"}),T=({updateFn:e,amount:a,direction:t,last:n})=>{const r={left:{true:"rounded-l-md",false:""},right:{true:"rounded-r-md",false:""}},o=a>0?_:D;console.log("rgf",Math.abs(a),a,t);const s=Math.abs(a),i=l.a.createElement(l.a.Fragment,null,l.a.createElement(O,{dir:t,side:"right",amount:s}),l.a.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.a.createElement(o,null)),l.a.createElement(O,{dir:t,side:"left",amount:s})),c=r[t]?r[t][!!n]:"";return l.a.createElement("button",{type:"button",onClick:t=>{t.preventDefault(),e(a)},className:" ".concat(c," relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-500 hover:text-gray-400 focus:z-10 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-100 active:text-gray-500 transition ease-in-out duration-150")},i)};var j=({name:e,life:a,updatePlayer:t})=>l.a.createElement(k,null,l.a.createElement(P,null),l.a.createElement("div",{className:"ml-5 w-0 flex-1"},l.a.createElement("dl",null,l.a.createElement("dt",{className:"text-sm leading-5 font-medium text-gray-500 truncate"},e),l.a.createElement("dd",{className:"flex items-baseline"},l.a.createElement("div",{className:"ml-2 flex items-baseline text-sm leading-5 font-semibold text-red-600"},l.a.createElement("span",{className:"relative z-0 inline-flex shadow-sm"},l.a.createElement(T,{amount:-5,direction:"left",last:!0,updateFn:n=>{t({name:e,life:a+n})}}),l.a.createElement(T,{amount:-1,direction:"left",updateFn:n=>{t({name:e,life:a+n})}}),l.a.createElement("div",{className:"-ml-px relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm leading-5 font-medium text-gray-500 hover:text-gray-400 focus:z-10 focus:outline-none focus:border-blue-300 focus:shadow-outline-blue active:bg-gray-100 active:text-gray-500 transition ease-in-out duration-150"},l.a.createElement("div",{className:"text-2xl leading-8 font-semibold text-gray-900"},a)),l.a.createElement(T,{amount:1,direction:"right",updateFn:n=>{t({name:e,life:a+n})}}),l.a.createElement(T,{amount:5,direction:"right",last:!0,updateFn:n=>{t({name:e,life:a+n})}})," "))))));const L=({addPlayer:e})=>{const a=Object(n.useState)("start"),t=Object(f.a)(a,2),r=t[0],o=t[1];switch(r){case"start":return l.a.createElement("section",null,l.a.createElement("span",{className:"inline-flex rounded-md shadow-sm"},l.a.createElement("button",{onClick:e=>{e.preventDefault(),o("opened")},type:"button",className:"inline-flex items-center px-6 py-3 border border-transparent text-base leading-6 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition ease-in-out duration-150"},"Add a Player")));case"opened":return l.a.createElement(A,{addPlayer:(...a)=>{e(...a),o("start")}});default:return l.a.createElement("section",null,"fuck")}},S=({children:e})=>l.a.createElement("div",{className:"bg-white overflow-hidden shadow rounded-lg"},l.a.createElement("div",{className:"px-4 py-5 sm:p-6"},l.a.createElement("div",{className:"flex items-center"},l.a.createElement("div",{className:"flex-shrink-0 bg-indigo-500 rounded-md p-3"},l.a.createElement("svg",{className:"h-6 w-6 text-white",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},l.a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"}))),l.a.createElement("div",{className:"ml-5 w-0 flex-1"},e)))),C=({users:e=[]})=>l.a.createElement(l.a.Fragment,null,"Active players: ",e.map(e=>e).join(", "));var I=({gamestate:e,users:a,updatePlayer:t,addPlayer:n})=>{const r=e.name.split(":"),o=Object(f.a)(r,1)[0],s=e.players;return l.a.createElement("div",{className:"py-12 bg-white"},l.a.createElement("div",{className:"max-w-screen-xl mx-auto px-4 sm:px-6 lg:px-8"},l.a.createElement("div",{className:"lg:text-center"},l.a.createElement("p",{className:"text-base leading-6 text-indigo-600 font-semibold tracking-wide uppercase"},l.a.createElement(C,{users:a})),l.a.createElement("h3",{className:"mt-2 text-3xl leading-8 font-extrabold tracking-tight text-gray-900 sm:text-4xl sm:leading-10"},o)),l.a.createElement("div",{className:"mt-10"},l.a.createElement("div",{className:"mt-5 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3"},Object.keys(s).map(e=>{const a=Object(i.a)({},s[e]);return l.a.createElement(j,Object.assign({updatePlayer:t(e)},a))}),l.a.createElement(S,null,l.a.createElement(L,{addPlayer:n}))))))},M=t(61),G=t.n(M);const R=({onClick:e})=>l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"inline-flex rounded-md shadow-sm"},l.a.createElement("button",{onClick:a=>{a.preventDefault(),e()},type:"button",className:"inline-flex items-center px-6 py-3 border border-transparent text-base leading-6 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition ease-in-out duration-150"},"Create a new game"))),U=({users:e,gamestate:a,updatePlayer:t,addPlayer:n})=>a.name?l.a.createElement(I,{updatePlayer:t,users:e,addPlayer:n,gamestate:a}):l.a.createElement("section",null,"No game!");const Y={login:y,loading:w,gamestate:({newGame:e,gamestate:a,users:t,updateGameState:n,updatePlayerInfo:r})=>l.a.createElement(N,null,l.a.createElement("main",null,l.a.createElement(U,{users:t,gamestate:a,addPlayer:({name:e,life:t})=>{const l=G()();n(Object(i.a)(Object(i.a)({},a),{},{players:Object(i.a)(Object(i.a)({},a.players),{},{[l]:{life:t,name:e}})}))},updatePlayer:e=>(a={})=>{r({[e]:Object(i.a)({},a)})}}),l.a.createElement(R,{onClick:e}))),fallback:()=>l.a.createElement("section",null,"Nothing to see here")};var F=Object(s.b)(e=>({pot:e.pot,name:e.name,names:e.names,users:e.users,snackbarIsOpen:e.snackbarIsOpen,mode:e.mode,gamestate:e.gamestate}))(e=>{const a=e.mode,t=e.dispatch,n=e.gamestate,r=e.users,o=Y[a];return console.log("testing this","https://commander-tax.herokuapp.com/"),console.log("App",t),o?l.a.createElement(o,{submitName:({name:e})=>t({type:"NAME_SUBMITTED",payload:{name:e}}),users:r,newGame:()=>t({type:"PRESSED_NEW_GAME"}),gamestate:n,updatePlayerInfo:e=>{t({type:"PLAYER_UPDATE",payload:e})},updateGameState:e=>t({type:"GAMESTATE_UPDATED",payload:e})}):Y.fallback});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=t(12),W=t(30),H=t.n(W);var z=(e={pot:0,snackbarIsOpen:!1,name:null,users:[],mode:"loading",gamestate:{}},a)=>{switch(a.type){case"GAMESTATE_UPDATED":console.log("GAMESTATE_UPDATED",a.payload),J&&J.emit("UPDATE_GAMESTATE",a.payload);break;case"UPDATE_RECEIVED":e=Object(i.a)(Object(i.a)({},e),{},{gamestate:a.payload,mode:"gamestate"});break;case"PLAYER_UPDATE":console.log("PLAYER_UPDATE",a.payload),J&&J.emit("PLAYER_UPDATE",a.payload);break;case"PLAYER_UPDATED":console.log("PLAYER_UPDATED",a.payload,e);const t=Object.keys(a.payload)[0];e=Object(i.a)(Object(i.a)({},e),{},{gamestate:Object(i.a)(Object(i.a)({},e.gamestate),{},{players:Object(i.a)(Object(i.a)({},e.gamestate.players),{},{[t]:a.payload[t]})}),mode:"gamestate"});break;case"PLAYER_LIST_UPDATED":e=Object(i.a)(Object(i.a)({},e),{},{users:a.payload});break;case"PRESSED_NEW_GAME":console.log("PRESSED_NEW_GAME"),J&&J.emit("UPDATE_GAMESTATE",{name:"".concat(H.a.commerce.productName(),": ").concat(H.a.hacker.phrase()),players:{}});break;case"PLAYER_LOGGED_IN":e=Object(i.a)(Object(i.a)({},e),{},{gamestate:a.payload,mode:"gamestate"});break;case"GET_NAME":e=Object(i.a)(Object(i.a)({},e),{},{mode:"login"});break;case"NAME_SUBMITTED":e=Object(i.a)(Object(i.a)({},e),{},{mode:"loading"}),console.log("NAME_SUBMITTED",{action:a,socket:J}),p("playerIdentity",{name:a.payload.name,status:"authenticating"}),J&&J.emit("PLAYER_LOGIN",a.payload)}return e};const V=Object(B.b)(z),J=b(V.dispatch);o.a.render(l.a.createElement(s.a,{store:V},l.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},138:function(e,a,t){},62:function(e,a,t){e.exports=t(1188)},94:function(e,a){}},[[62,1,2]]]);
//# sourceMappingURL=main.55341519.chunk.js.map